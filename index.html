
<!DOCTYPE HTML>
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <title>Yatao Li's home page</title>
    <meta name="author" content="Jakub Jankiewicz - jcubic&#64;onet.pl"/>
    <meta name="Description" content="Demonstration for JQuery Terminal Emulator using call automaticly JSON-RPC service (in php) with authentication."/>
    <script src="js/jquery-1.7.1.min.js"></script>
    <script src="js/jquery.mousewheel-min.js"></script>
    <script src="js/jquery.terminal.js"></script>
    <link href="css/jquery.terminal.css" rel="stylesheet"/>
    <style type="text/css">
#terminal {
	position: relative;
	top: 0;
	left: 0;
	width: 98%;
	height: 97%;
}
#page{
	position: absolute;
	background:#000000;
	color:#E8E8E8;
	top:0;
	left:0;
	width:100%;
	height:100%;
}
a:link{
	color:#00FF00;
}
#stage{
	width:100%;
	height:80%;
	overflow: auto;
	scrollbar-face-color: #FFFFFF;
	scrollbar-highlight-color: #FFFFFF;
	scrollbar-3dlight-color: #EEEEEE;
	scrollbar-darkshadow-color: #EEEEEE;
	scrollbar-shadow-color: #EEEEEE;
	scrollbar-arrow-color: #FFFFFF;
	scrollbar-track-color: #DDDDDD;
}
	</style>
    <script>
var g_stage_toggled = false;
var g_terminal_full_height = "97%";
var g_terminal_compact_height = "15%";
var g_current_mode = "";
var g_current_diary_page = "";

function OpenStage(content, link)
{
	if(!g_stage_toggled)
	{
		g_stage_toggled = true;
		$('#terminal').animate({height:g_terminal_compact_height},100);
		$('#stage').slideToggle(100);
	}
	if(content)
	{
		if(!link)
			$('#stage').html(content);
		else{
			$('#stage').html("<h1>Loading...</h1>");
			$('#stage').load("proxy.php",{'url':content} );
		}
	}
}
function CloseStage()
{
	if(!g_stage_toggled)
		return;
	g_stage_toggled = false;
	$('#terminal').animate({height:g_terminal_full_height},100);
	$('#stage').slideToggle(100);
}
function OpenDiary(args)
{
	if(!args)
	{
		OpenStage("http://v-yadli.github.com/diary/diary.html",true);
		g_current_diary_page = "";
	}
	else
	{
		OpenStage("http://v-yadli.github.com/diary/" + args + ".html",true);
		g_current_diary_page = args;
	}
	g_current_mode = "diary";
}
function GetNextDiaryEntry()
{
	var ret = "";
	$.ajax({
		url:		'proxy.php',
		data:		{'nextDiaryOf':g_current_diary_page},
	 	success:	function(data) {
	 					ret = data;
	 					aleret(data);
					},
		async:		false
		}
	);
	return ret;
}
jQuery(document).ready(function($) {
	$('#stage').slideUp(0);
    $('#terminal').terminal(
    {
    	open: function(args)
    	{
    		OpenStage();
    	},
    	about: function(args)
    	{
			OpenStage("<h1>My name is Yatao Li.</h1>");
    	},
    	help: function(args)
    	{
    		this.echo("Available commands:");
    		this.echo("about")
    		this.echo("close")
    	},
    	close: function(args)
    	{
    		CloseStage();
    	},
    	diary: OpenDiary,
    	n: function(args)
    	{
    		var notsure = false;
    		switch(g_current_mode)
    		{
    			case "diary":
				if(g_current_diary_page == "")
					notsure = true;
				else{
					OpenDiary(GetNextDiaryEntry());
				}
    			break;
    			default:
    				notsure = true;
    			break;
    		}
    		if(notsure)
    			this.echo("Not sure where is the next page. I'm sorry.");
    	}
    }	,
    {
        login: false,
        greetings: "Welcome to Yatao's homepage!",
        clear: false,
        tabcompletion: true
    });
});
    </script>
  </head>
<body>
	<div id="page">
		<div id="stage"><frame src = "http://v-yadli.github.com/diary/diary.html" /></div>
		<div id="terminal"></div>
	</div>
</body>
</html>
